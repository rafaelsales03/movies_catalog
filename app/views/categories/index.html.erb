<% content_for :title, t('.title') %>

<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
  <h1><%= t('.main_title') %></h1>
  <%= link_to t('.new_category'), new_category_path, class: "btn btn-primary" %>
</div>

<div class="card shadow-sm">
  <div class="card-body">
    <% if @categories.any? %>
      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <thead>
            <tr>
              <th><%= t('.name_header') %></th>
              <th class="text-center"><%= t('.movies_header') %></th>
              <th class="text-end"><%= t('.actions_header') %></th>
            </tr>
          </thead>
          <tbody>
            <% @categories.each do |category| %>
              <tr>
                <td><%= category.name %></td>
                <td class="text-center">
                  <span class="badge bg-secondary rounded-pill"><%= category.movies.count %></span>
                </td>
                <td class="text-end">
                  <div class="btn-group btn-group-sm">
                    <%= link_to t('edit'), edit_category_path(category), class: "btn btn-outline-primary" %>
                    <%= button_to t('delete'), category_path(category),
                        method: :delete,
                        class: "btn btn-outline-danger",
                        form: { data: { turbo_confirm: t('.delete_confirm') }, class: 'd-inline' } %>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <div class="mt-3 d-flex justify-content-center">
         <%= paginate @categories %>
      </div>
    <% else %>
      <div class="text-center py-5">
        <i class="bi bi-tag fs-1 text-muted mb-3"></i>
        <p class="text-muted"><%= t('.no_categories_yet') %></p>
        <%= link_to t('.create_first_category'), new_category_path, class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>

<div class="mt-3">
  <%= link_to t('.back_to_movies'), movies_path, class: "btn btn-secondary" %>
</div>