<% content_for :title, t('.title') %>

<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
  <h1>
    <i class="bi bi-film"></i> <%= t('.main_title') %>
    <% if @search_performed && @total_results.present? %>
      <span class="badge bg-secondary align-middle"><%= @total_results %></span>
    <% end %>
  </h1>
  <div class="d-flex gap-2 flex-wrap">
    <% if user_signed_in? %>
      <%= link_to t('.manage_categories'), categories_path, class: "btn btn-outline-secondary" %>
      <%= link_to t('.new_movie'), new_movie_path, class: "btn btn-primary" %>
    <% end %>
  </div>
</div>

<%= render 'movies/shared/search_form', categories: @categories, all_directors: @all_directors %>

<%= render 'movies/shared/active_filters', active_filters: @active_filters %>

<%= render 'movies/shared/search_results_info', search_performed: @search_performed, total_results: @total_results, movies: @movies %>

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
  <% @movies.each do |movie| %>
    <%= render 'movies/shared/movie_card', movie: movie %>
  <% end %>
</div>

<% if @movies.empty? %>
  <%= render 'movies/shared/empty_state', search_performed: @search_performed %>
<% end %>

<%= render 'movies/shared/pagination', collection: @movies %>